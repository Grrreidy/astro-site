/* 
   GOTH THEME
   Fantasy goth / Geocities throwback
   Loads when fantasy goth mode is enabled. I'm not sorry.
=================================================== */


/* 
   THEME COLOR TOKENS
=================================================== */
:root {
  /* Shared base tokens */
  --goth-white: var(--color-white);
  --goth-black: var(--color-black);
  --goth-blue: var(--color-blue);

  /* Theme-specific tokens */
  --goth-text: #e5e5e5;
  --goth-bg-dark-1: #0a0a0a;
  --goth-bg-dark-2: #1a1a1a;
  --goth-panel: #1d0149;
  --goth-header-grad-end: #A020F0;
  --goth-purple: #B147FE;
  --goth-purple-strong: #A73DF8;
  --goth-grey-verydark: #111;
  --goth-grey-3: #333;
  --goth-grey-4: #444;
  --goth-grey-light: #ccc;

  /* Alpha colors used in effects */
  --goth-radial-red-12: rgba(176, 0, 32, 0.12);
  --goth-purple-glow-60: rgba(163, 0, 255, 0.6);
  --goth-purple-glow-100: rgba(163, 0, 255, 1);
  --goth-purple-soft-24: rgba(177, 71, 254, 0.24);
  --goth-purple-soft-18: rgba(177, 71, 254, 0.18);
  --goth-white-03: rgba(255, 255, 255, 0.03);
  --goth-white-06: rgba(255, 255, 255, 0.06);
  --goth-black-60: rgba(0, 0, 0, 0.6);
  --goth-black-35: rgba(0, 0, 0, 0.35);
}


/* 
   FONT
=================================================== */
@import url('https://fonts.cdnfonts.com/css/twilight.font');


/* 
   BACKGROUND
=================================================== */
html, body {
  background:
    url("/themes/goth/background.png") repeat fixed,
    radial-gradient(1200px 600px at 70% -10%, var(--goth-radial-red-12), transparent 60%),
    linear-gradient(180deg, var(--goth-bg-dark-1) 0%, var(--goth-bg-dark-2) 100%);
  background-size: auto, cover, cover;
  color: var(--goth-text);
}


/* 
   PANELS
=================================================== */
.container,
.article,
.blog,
.post-item,
.blog-content {
  background: var(--goth-panel);
}

header {
  background: linear-gradient(270deg, var(--goth-panel) 0%, var(--goth-header-grad-end) 100%);
}


/* 
   HEADINGS
=================================================== */
/*  Twilight font on all headings in goth mode */
html h1, html h2, html h3, html h4, html h5, html h6,
body h1, body h2, body h3, body h4, body h5, body h6,
.container h1, .container h2, .container h3, .container h4, .container h5, .container h6,
main h1, main h2, main h3, main h4, main h5, main h6,
article h1, article h2, article h3, article h4, article h5, article h6,
.blog-content h1, .blog-content h2, .blog-content h3, .blog-content h4, .blog-content h5, .blog-content h6,
.post-content h1, .post-content h2, .post-content h3, .post-content h4, .post-content h5, .post-content h6 {
  font-family: 'Twilight', "Times New Roman", "Baskerville", serif !important;
  letter-spacing: 0.02em
  color: var(--goth-purple) 
  text-shadow: 1px 1px 2px var(--goth-black)
}

.footer-columns h3 {
  font-family: 'Twilight', "Times New Roman", "Baskerville", serif;
  color: var(--goth-white);
}


/* 
   LINKS
=================================================== */
a {
  color: var(--goth-purple);
  text-decoration: underline;
  text-decoration-color: var(--goth-purple);
  text-underline-offset: 0.18em;
}

.container a:hover {
  color: var(--goth-white);
  background-color: var(--goth-purple-strong);
  text-decoration: none;
}

.container a:focus {
  color: var(--goth-white);
}

::focus-visible {
  outline: 0.125em solid var(--goth-white);
}

/* Heading links */
::where(h1, h2, h3, h4, h5, h6) a {
  color: var(--goth-purple);
  text-decoration: none;
  background: transparent;
}

::where(h1, h2, h3, h4, h5, h6) a:hover {
  text-decoration: underline wavy var(--goth-purple);
}

/* Heading links inside main content */
.container :is(h1, h2, h3, h4, h5, h6) a {
  color: var(--goth-purple);
}

/* Blog list heading links */
.post-item h2 a,
.post-item h3 a,
.post-title a {
  color: var(--goth-purple);
  text-decoration: none;
  background: transparent;
}

.post-item h2 a:hover,
.post-item h3 a:hover,
.post-title a:hover,
.post-item h2 a:focus,
.post-item h3 a:focus,
.post-title a:focus {
  color: var(--goth-white);
  text-decoration: underline;
  background: transparent;
}


/* Footer links */
footer a {
  color: var(--goth-text);
  text-decoration: underline;
  text-decoration-color: var(--goth-purple);
}

footer a:hover {
  color: var(--goth-white);
  background-color: var(--goth-purple-strong);
  text-decoration: none;
}


/* 
   NAVIGATION
=================================================== */
nav a {
  color: var(--goth-white);
}

a:is(:hover, :focus) {
  color: var(--goth-white);
  border-bottom-color: var(--goth-white);
}

nav a.active {
  border-bottom-color: var(--goth-white);
}

.HeaderLink {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: clamp(1rem, 2vw, 1.5rem);
}

.logo {
  color: var(--goth-white);
}

.logo:hover,
.logo:focus {
  color: var(--color-blue);
}


/* 
   DIVIDERS
=================================================== */
hr,
.section-divider {
  border: none;
  height: 42px; 
  background: url("/themes/goth/gifs/divider.gif") no-repeat center;
  background-size: auto 100%;
  max-width: var(--measure-loose);
  margin-inline: auto;
  margin-block: var(--space-m);
}


/* 
   BUTTONS
=================================================== */
button,
input[type="button"],
input[type="submit"],
a.button {
  background-image: linear-gradient(180deg, rgba(255,255,255,0.15), rgba(0,0,0,0.4));
  background-color: var(--goth-grey-verydark);
  border: 2px solid var(--goth-purple);
  color: var(--goth-text);
  text-shadow: 0 1px 0 var(--goth-black);
}

button:hover,
input[type="button"]:hover,
input[type="submit"]:hover,
a.button:hover {
  background-color: var(--goth-purple);
  color: var(--goth-white);
}


/* 
   BLOCKQUOTES
=================================================== */
blockquote {
  border-left: 4px solid var(--goth-purple);
  font-style: italic;
  color: var(--goth-grey-light);
}


/* 
   TABLES
=================================================== */
article table {
  border-collapse: collapse;
  width: 100%;
  font-size: 0.9rem;
}

article th,
article td {
  border: 1px solid var(--goth-grey-3);
  padding: 0.3rem 0.6rem;
}

article th {
  background: var(--goth-grey-verydark);
  color: var(--goth-purple);
  font-weight: bold;
}

code {
  background-color: var(--color-blue);
  color: var(--color-white);
  font-family: monospace;
  font-size: 0.95em;
  padding: 0.15em 0.4em;
  border-radius: 4px;
}


/* 
   SELECTION
=================================================== */
::selection {
  color: var(--goth-white);
  background: var(--goth-purple);
}

::-moz-selection {
  color: var(--goth-white);
  background: var(--goth-purple);
}


/* 
   TOGGLE (GOTH SWITCH)
=================================================== */
.goth-switch {
  display: inline-flex;
  align-items: center;
  gap: 0.6rem;
  margin-top: var(--space-s);
  cursor: pointer;
  color: var(--goth-white);
  font-size: var(--font-m);
  user-select: none;
}

.goth-switch input {
  position: absolute;
  opacity: 0;
  width: 0;
  height: 0;
}

.goth-switch .slider {
  position: relative;
  inline-size: 2.8rem;
  block-size: 1.6rem;
  border-radius: 999px;
  border: 2px solid var(--goth-white);
  background-color: var(--goth-grey-4);
  overflow: hidden;
  transition: background-color .2s;
}

.goth-switch .slider::before {
  content: "";
  position: absolute;
  top: .15rem;
  left: .15rem;
  inline-size: 1.1rem;
  block-size: 1.1rem;
  border-radius: 50%;
  background-color: var(--goth-white);
  border: 2px solid var(--goth-black); /* outline for contrast */
  box-shadow: 0 0 6px var(--goth-purple-glow-60);
  transition: transform .2s, box-shadow .3s;
  z-index: 2;
}

.goth-switch .slider::after {
  content: "ðŸ¦‡";
  position: absolute;
  top: 50%;
  left: .55rem;
  transform: translate(-50%, -50%);
  font-size: .95rem;
  opacity: 0;
  transition: opacity .2s, left .2s;
  z-index: 3;
}

.goth-switch input:focus-visible + .slider {
  outline: 0.125em solid var(--goth-white);
  outline-offset: 2px;
}

/* Checked state with thinner animated stripes */
.goth-switch input:checked + .slider {
  background: repeating-linear-gradient(
    45deg,
    var(--goth-purple),
    var(--goth-purple) 5px,
    var(--goth-white) 5px,
    var(--goth-white) 10px
  );
  background-size: 20px 20px;
  animation: stripe-slide 0.7s linear infinite;
}

.goth-switch input:checked + .slider::before {
  transform: translateX(1.2rem);
  animation: thumb-pulse 1.2s ease-in-out infinite;
}

.goth-switch input:checked + .slider::after {
  opacity: 1;
  left: 2.25rem;
}

@keyframes stripe-slide {
  from { background-position: 0 0; }
  to   { background-position: 20px 20px; }
}

@keyframes thumb-pulse {
  0%,100% { box-shadow: 0 0 6px var(--goth-purple-glow-60); }
  50%     { box-shadow: 0 0 12px var(--goth-purple-glow-100); }
}

.switch-label {
  color: var(--goth-white);
  font-family: 'Twilight', 'WorkSans', system-ui, sans-serif;
}


/* 
   DECORATIVE GIF LAYER
=================================================== */
.goth-decor {
  position: fixed;
  inset: 0;
  z-index: 0; /* above wallpaper, below content */
  pointer-events: none;
  contain: layout paint;
}

.goth-item {
  position: absolute;
}

.goth-decor img,
.goth-decor .goth-gif {
  display: block;
  max-width: min(22vmin, 220px);
  border: 0 !important;
  box-shadow: none !important;
  filter: none !important;
  background: transparent;
  image-rendering: auto;
  will-change: transform;
}


/* 
   SIDE STRIPS
=================================================== */
.goth-side {
  position: fixed;
  top: 0;
  bottom: 0;
  width: 100px; /* adjust width */
  background-repeat: repeat-y;
  background-position: top;
  background-size: contain;
  z-index: -1;
}

.goth-side-left {
  left: 0;
  background-image: url("/themes/goth/gifs/rose-left.png");
}

.goth-side-right {
  right: 0;
  background-image: url("/themes/goth/gifs/rose-right.png");
}


/* 
   MOTION UTILITIES
=================================================== */
@keyframes swayX {
  0%,100% { transform: translateX(0) }
  50% { transform: translateX(var(--amp-x, 18px)) }
}

@keyframes swayY {
  0%,100% { transform: translateY(0) }
  50% { transform: translateY(var(--amp-y, -16px)) }
}

@keyframes driftXY {
  0%   { transform: translate(0, 0) }
  25%  { transform: translate(var(--amp-x, 20px), var(--amp-y, -14px)) }
  50%  { transform: translate(calc(var(--amp-x, 20px) * -0.6), calc(var(--amp-y, -14px) * -0.6)) }
  75%  { transform: translate(calc(var(--amp-x, 20px) * 0.4),  calc(var(--amp-y, -14px) * 0.9)) }
  100% { transform: translate(0, 0) }
}

@keyframes orbit {
  0%   { transform: translate(var(--amp-x, 24px), 0) rotate(0deg) }
  25%  { transform: translate(0, var(--amp-y, 24px)) rotate(90deg) }
  50%  { transform: translate(calc(var(--amp-x, 24px) * -1), 0) rotate(180deg) }
  75%  { transform: translate(0, calc(var(--amp-y, 24px) * -1)) rotate(270deg) }
  100% { transform: translate(var(--amp-x, 24px), 0) rotate(360deg) }
}

/* Apply with utility classes */
.sway-x     { animation: swayX 5.5s ease-in-out infinite; }
.sway-y     { animation: swayY 6.2s ease-in-out infinite; }
.drift      { animation: driftXY 9s ease-in-out infinite; }
.orbit-slow { animation: orbit 18s linear infinite; }
.orbit-fast { animation: orbit 10s linear infinite; }

@media (prefers-reduced-motion: reduce) {
  .sway-x, .sway-y, .drift, .orbit-slow, .orbit-fast { animation: none !important; }
}


/* 
   CONTENT ABOVE DECOR
=================================================== */
header, main, footer {
  position: relative;
  z-index: 1;
}

/* 
   Image goth effect
   Applies to all images except those in the footer or with .no-goth-img
=================================================== */

img:not(.no-goth-img) {
  /* Tint + punch */
  filter:
    sepia(0.18)
    hue-rotate(300deg)     /* purple tint */
    saturate(1.05)
    contrast(1.08)
    brightness(0.98)
    drop-shadow(0 2px 8px var(--goth-purple-soft-24))
    drop-shadow(0 0 24px var(--goth-purple-soft-18));
  outline: 1px solid var(--goth-white-06);
  outline-offset: -2px;
  border-radius: 6px;
  transition: transform 160ms ease, filter 160ms ease, box-shadow 160ms ease;
  will-change: transform, filter;
  backface-visibility: hidden;
}

/* Optional ornate frame for figures and post images */
:where(.blog-content, article, .post-item, .container) img:not(.no-goth-img) {
  box-shadow:
    inset 0 0 0 2px var(--goth-white-03),
    0 0 0 1px var(--goth-black-60),
    0 10px 24px var(--goth-black-35);
  border-radius: 10px;
}

/* Footer images: no effect */
footer img {
  filter: none !important;
  box-shadow: none !important;
  outline: none !important;
  transform: none !important;
  border-radius: 0; /* or keep your own footer styling */
}

/* Escape hatch for specific images anywhere */
.no-goth-img {
  filter: none !important;
  box-shadow: none !important;
  outline: none !important;
  transform: none !important;
}

/* Reduced motion users: keep it static */
@media (prefers-reduced-motion: reduce) {
  img:not(.no-goth-img) {
    transition: none;
    transform: none !important;
  }
}


/* 
   CURSOR TRAIL
=================================================== */
.goth-trail {
  position: fixed;
  pointer-events: none;
  z-index: 9999;
  opacity: 1;
  transform: translate(-50%, -50%);
  background:
    radial-gradient(closest-side at 50% 50%, var(--c1) 0%, transparent 70%),
    conic-gradient(from 0deg,
      var(--c1) 0 12.5%,
      transparent 0 25%,
      var(--c2) 0 37.5%,
      transparent 0 50%,
      var(--c1) 0 62.5%,
      transparent 0 75%,
      var(--c2) 0 87.5%,
      transparent 0 100%);
  clip-path: polygon(50% 0%, 62% 38%, 100% 50%, 62% 62%, 50% 100%, 38% 62%, 0% 50%, 38% 38%);
  border-radius: 3px;
  mix-blend-mode: screen;
  filter:
    drop-shadow(0 0 6px var(--c1))
    drop-shadow(0 0 14px var(--c2));
  animation:
    goth-trail-fade 0.9s ease-out forwards,
    goth-trail-twinkle 0.9s ease-in-out infinite;
}

/* Comet variant with a trailing blur */
.goth-trail--comet { isolation: isolate; }
.goth-trail--comet::after {
  content: "";
  position: absolute;
  inset: 0;
  transform: translate(-10%, -50%) scaleX(2.2);
  background: linear-gradient(to left, transparent 0%, var(--c2) 40%, var(--c1) 100%);
  filter: blur(6px);
  opacity: 0.85;
  mix-blend-mode: screen;
  pointer-events: none;
}

@keyframes goth-trail-fade {
  0%   { opacity: 1; transform: translate(-50%, -50%) scale(1); }
  100% { opacity: 0; transform: translate(-50%, -50%) scale(0.55); }
}

@keyframes goth-trail-twinkle {
  0%,100% { filter: drop-shadow(0 0 6px var(--c1)) drop-shadow(0 0 14px var(--c2)); }
  50%     { filter: drop-shadow(0 0 10px var(--c1)) drop-shadow(0 0 20px var(--c2)); }
}

@media (prefers-reduced-motion: reduce) {
  .goth-trail, .goth-trail--comet::after { animation: none !important; }
  .goth-trail { display: none !important; }
}

/* 
    CONTENT OVERRIDES
   - Ensures text is legible on dark theme
=================================================== */
.field-help {
  color: var(--goth-white);
}

/* Common error message hooks */
.error,
.error-message,
.validation-error,
[aria-live="polite"],
[aria-live="assertive"] {
  color: var(--goth-white);
  background: transparent;
}

/* Generated content blocks (a11y docs output) */
.a11y-result,
.status-message {
  color: var(--goth-white);
}

.a11y-result pre {
  background: transparent;
  color: var(--goth-white);
}

/* Strengthen generated output overrides */
.a11y-result .blog-content {
  color: var(--goth-white);
  background: transparent;
  border-color: var(--goth-white);
}

#output,
#output p,
#output li,
#output div {
  color: var(--goth-white);
  background: transparent;
}
